# ğŸ§ª ë¡œì»¬ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

Firebase Functionsë¥¼ ë°°í¬í•˜ì§€ ì•Šê³  ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

---

## ë°©ë²• 1: ì‹¤ì œ Firebase Functions ì‚¬ìš© (ë°°í¬ í•„ìš”) â­ ì¶”ì²œ

ê°€ì¥ ì‰½ê³  ì •í™•í•œ ë°©ë²•ì…ë‹ˆë‹¤.

### 1ë‹¨ê³„: Functions ë°°í¬
```bash
cd functions
npm install
npm run build
cd ..
firebase deploy --only functions
```

### 2ë‹¨ê³„: í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì—´ê¸°
```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ **test-ranking-local.html** íŒŒì¼ ì—´ê¸°:
```
D:\bloggogogo\test-ranking-local.html
```

ë˜ëŠ” ì§ì ‘ íŒŒì¼ ë”ë¸”í´ë¦­!

### 3ë‹¨ê³„: í…ŒìŠ¤íŠ¸
1. **ë¡œê·¸ì¸** ë²„íŠ¼ í´ë¦­
   - ì´ë©”ì¼: `admin@example.com`
   - ë¹„ë°€ë²ˆí˜¸: `admin123456`

2. **í‚¤ì›Œë“œ ì…ë ¥**: ì˜ˆ) "í‚¤ì›Œë“œ ë¶„ì„"

3. **ë¸”ë¡œê·¸ URL ì…ë ¥**: ì‹¤ì œ ë„¤ì´ë²„ ë¸”ë¡œê·¸ URL
   ```
   https://blog.naver.com/your_id/222xxx
   ```

4. **ìˆœìœ„ í™•ì¸í•˜ê¸°** í´ë¦­

5. 5~10ì´ˆ ëŒ€ê¸°

6. ê²°ê³¼ í™•ì¸! ğŸ‰

---

## ë°©ë²• 2: Firebase Emulator ì‚¬ìš© (ë°°í¬ ë¶ˆí•„ìš”)

Functionsë¥¼ ë°°í¬í•˜ì§€ ì•Šê³  ë¡œì»¬ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.

### 1ë‹¨ê³„: Firebase Emulator ì„¤ì¹˜
```bash
# ì „ì—­ ì„¤ì¹˜ (í•œ ë²ˆë§Œ)
npm install -g firebase-tools
```

### 2ë‹¨ê³„: Emulator ì„¤ì • í™•ì¸
`firebase.json`ì´ ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. âœ…

### 3ë‹¨ê³„: Emulator ì‹œì‘
```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ
firebase emulators:start
```

ì½˜ì†”ì— ë‹¤ìŒê³¼ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:
```
âœ”  functions[asia-northeast3-checkAllRankings]: http function initialized (http://127.0.0.1:5001/...)
âœ”  All emulators ready!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ”  All emulators ready! It is now safe to connect your app. â”‚
â”‚ i  View Emulator UI at http://127.0.0.1:4000                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4ë‹¨ê³„: test-ranking-local.html ìˆ˜ì •
íŒŒì¼ì„ ì—´ê³  ì´ ì¤„ì˜ ì£¼ì„ì„ í•´ì œ:
```javascript
// ğŸ”§ ë¡œì»¬ Emulator ì‚¬ìš©í•˜ë ¤ë©´ ì£¼ì„ í•´ì œ
connectFunctionsEmulator(functions, 'localhost', 5001);
```

ìˆ˜ì • í›„:
```javascript
// ğŸ”§ ë¡œì»¬ Emulator ì‚¬ìš©
connectFunctionsEmulator(functions, 'localhost', 5001);
```

### 5ë‹¨ê³„: í…ŒìŠ¤íŠ¸
1. **test-ranking-local.html** íŒŒì¼ ì—´ê¸° (ë”ë¸”í´ë¦­)
2. ë¡œê·¸ì¸
3. ìˆœìœ„ í™•ì¸

### Emulator ì¥ì :
- âœ… ë°°í¬ ë¶ˆí•„ìš”
- âœ… ë¹ ë¥¸ ê°œë°œ
- âœ… ë¡œì»¬ì—ì„œ ë””ë²„ê¹… ê°€ëŠ¥
- âœ… ë¬´ë£Œ (Firebase ê³¼ê¸ˆ ì—†ìŒ)

### Emulator ë‹¨ì :
- âŒ ì—¬ì „íˆ CORS ë¬¸ì œ ë°œìƒí•  ìˆ˜ ìˆìŒ
  (ì‹¤ì œ ë„¤ì´ë²„ì— ìš”ì²­í•˜ë¯€ë¡œ)

---

## ë°©ë²• 3: ê°„ë‹¨í•œ ë¸Œë¼ìš°ì € ì½˜ì†” í…ŒìŠ¤íŠ¸

### npm run dev ì‹¤í–‰ í›„:
```bash
npm run dev
```

### ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ (F12):
```javascript
// Firebase Functionsë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ import
// (ê°œë°œ ì„œë²„ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•¨)

import { getFunctions, httpsCallable } from 'firebase/functions';
import { auth } from './src/config/firebase';

// Functions ì´ˆê¸°í™”
const functions = getFunctions(undefined, 'asia-northeast3');

// ë¡œê·¸ì¸ í™•ì¸
if (!auth.currentUser) {
    alert('ë¨¼ì € ë¡œê·¸ì¸í•˜ì„¸ìš”!');
}

// ìˆœìœ„ í™•ì¸
const checkRankings = httpsCallable(functions, 'checkAllRankings');
const result = await checkRankings({
    keyword: 'í‚¤ì›Œë“œ ë¶„ì„',
    targetUrl: 'https://blog.naver.com/your_id/222xxx'
});

console.log(result.data);
```

---

## ğŸ¯ ì¶”ì²œ ë°©ë²•

### ì²˜ìŒ í…ŒìŠ¤íŠ¸: **ë°©ë²• 1 (ì‹¤ì œ Firebase)** â­
- ê°€ì¥ í™•ì‹¤
- í”„ë¡œë•ì…˜ í™˜ê²½ê³¼ ë™ì¼
- CORS ë¬¸ì œ ì™„ì „ í•´ê²°

### ê°œë°œ ì¤‘: **ë°©ë²• 2 (Emulator)**
- ë¹ ë¥¸ ë°˜ë³µ ê°œë°œ
- ë””ë²„ê¹… ìš©ì´

---

## ğŸ› ë¬¸ì œ í•´ê²°

### 1. "unauthenticated" ì˜¤ë¥˜ ë˜ëŠ” "ë¨¼ì € ë¡œê·¸ì¸í•˜ì„¸ìš”"
```
â†’ Firebase Auth ë¡œê·¸ì¸ í™•ì¸
â†’ test-ranking-local.htmlì—ì„œ "í…ŒìŠ¤íŠ¸ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸" ë²„íŠ¼ í´ë¦­
â†’ ì´ë©”ì¼: admin@example.com
â†’ ë¹„ë°€ë²ˆí˜¸: admin123456
â†’ "ë¡œê·¸ì¸ ì„±ê³µ" ë©”ì‹œì§€ í™•ì¸ (1-2ì´ˆ ì†Œìš”)
â†’ ë¸Œë¼ìš°ì € ì½˜ì†”(F12)ì—ì„œ "âœ… ë¡œê·¸ì¸ë¨: admin@example.com" í™•ì¸
```

**ë¡œê·¸ì¸ì´ ì•ˆ ë˜ëŠ” ê²½ìš°**:
1. ë¸Œë¼ìš°ì € ì½˜ì†”(F12) ì—´ê³  ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
2. Firebase ì½˜ì†”ì—ì„œ í•´ë‹¹ ì‚¬ìš©ì ê³„ì • ì¡´ì¬ ì—¬ë¶€ í™•ì¸
3. file:// í”„ë¡œí† ì½œë¡œ ì—´ì—ˆë‹¤ë©´ ë¡œì»¬ ì›¹ì„œë²„ ì‚¬ìš©:
   ```bash
   # Python ì‚¬ìš©
   python -m http.server 8000
   # ê·¸ í›„ http://localhost:8000/test-ranking-local.html ì ‘ì†

   # ë˜ëŠ” Node.js ì‚¬ìš©
   npx http-server -p 8000
   # ê·¸ í›„ http://localhost:8000/test-ranking-local.html ì ‘ì†
   ```

### 2. "CORS" ì˜¤ë¥˜ (Emulator ì‚¬ìš© ì‹œ)
```
â†’ ë°©ë²• 1ë¡œ ì „í™˜ (ì‹¤ì œ Firebase Functions ë°°í¬)
â†’ ë˜ëŠ” CORS ë¸Œë¼ìš°ì € í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜
```

### 3. "Function not found"
```
â†’ Functions ë°°í¬ í™•ì¸
â†’ firebase deploy --only functions

ë˜ëŠ” Emulator ì‹¤í–‰ í™•ì¸
â†’ firebase emulators:start
```

### 4. ì˜¤ë˜ ê±¸ë¦¼ (30ì´ˆ+)
```
â†’ ë„¤ì´ë²„ ì„œë²„ ì‘ë‹µ ëŠë¦¼ (ì •ìƒ)
â†’ ë˜ëŠ” ë„¤ì´ë²„ê°€ ì°¨ë‹¨ (IP ë³€ê²½ í•„ìš”)
```

### 5. "ìˆœìœ„ ì—†ìŒ" ê²°ê³¼
```
â†’ ì‹¤ì œë¡œ ìˆœìœ„ê°€ 100ìœ„ ë°–ì¼ ìˆ˜ ìˆìŒ
â†’ ë¸”ë¡œê·¸ URL í™•ì¸
â†’ í‚¤ì›Œë“œ í™•ì¸
```

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

### ì…ë ¥:
```
í‚¤ì›Œë“œ: í‚¤ì›Œë“œ ë¶„ì„
URL: https://blog.naver.com/example/222123456
```

### ì˜ˆìƒ ê²°ê³¼ (ì„±ê³µ):
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ë¸”ë¡œê·¸ ë­í‚¹ í™•ì¸ ê²°ê³¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” ê²€ìƒ‰ í‚¤ì›Œë“œ: í‚¤ì›Œë“œ ë¶„ì„
ğŸ“ ë¸”ë¡œê·¸ URL: https://blog.naver.com/example/222123456

ã€í†µí•©ê²€ìƒ‰ - ìŠ¤ë§ˆíŠ¸ë¸”ë¡ã€‘
  âœ… 5ìœ„ ë°œê²¬!
  ğŸ“Œ ì œëª©: í‚¤ì›Œë“œ ë¶„ì„ ì™„ë²½ ê°€ì´ë“œ

ã€í†µí•©ê²€ìƒ‰ - ë¸”ë¡œê·¸ ì˜ì—­ã€‘
  âœ… 12ìœ„ ë°œê²¬!
  ğŸ“Œ ì œëª©: í‚¤ì›Œë“œ ë¶„ì„ ì™„ë²½ ê°€ì´ë“œ

ã€ë¸”ë¡œê·¸ íƒ­ã€‘
  âœ… 8ìœ„ ë°œê²¬!
  ğŸ“Œ ì œëª©: í‚¤ì›Œë“œ ë¶„ì„ ì™„ë²½ ê°€ì´ë“œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
í™•ì¸ ì‹œê°: 2025. 11. 1. ì˜¤í›„ 3:30:00
```

### ì˜ˆìƒ ê²°ê³¼ (ìˆœìœ„ ì—†ìŒ):
```
ã€í†µí•©ê²€ìƒ‰ - ìŠ¤ë§ˆíŠ¸ë¸”ë¡ã€‘
  âŒ 10ìœ„ ë‚´ ìˆœìœ„ ì—†ìŒ

ã€í†µí•©ê²€ìƒ‰ - ë¸”ë¡œê·¸ ì˜ì—­ã€‘
  âŒ 30ìœ„ ë‚´ ìˆœìœ„ ì—†ìŒ

ã€ë¸”ë¡œê·¸ íƒ­ã€‘
  âŒ 100ìœ„ ë‚´ ìˆœìœ„ ì—†ìŒ
```

---

## âš¡ ë¹ ë¥¸ ì‹œì‘

```bash
# 1. Functions ë°°í¬ (í•œ ë²ˆë§Œ)
cd functions
npm install
npm run build
cd ..
firebase deploy --only functions

# 2. í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì—´ê¸°
# D:\bloggogogo\test-ranking-local.html ë”ë¸”í´ë¦­

# 3. ë¡œê·¸ì¸ â†’ ìˆœìœ„ í™•ì¸!
```

---

## ğŸ‰ ì„±ê³µ ê¸°ì¤€

- âœ… ë¡œê·¸ì¸ ì„±ê³µ
- âœ… ìˆœìœ„ í™•ì¸ ë²„íŠ¼ í´ë¦­
- âœ… 5~10ì´ˆ í›„ ê²°ê³¼ í‘œì‹œ
- âœ… 3ê°€ì§€ ì˜ì—­ ìˆœìœ„ í™•ì¸ë¨

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. âœ… ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì„±ê³µ
2. â³ ì‹¤ì œ ë¸”ë¡œê·¸ URLë¡œ í…ŒìŠ¤íŠ¸
3. â³ ì—¬ëŸ¬ í‚¤ì›Œë“œ í…ŒìŠ¤íŠ¸
4. â³ UI ê°œë°œ (ëŒ€ì‹œë³´ë“œ)
5. â³ ìë™ ìŠ¤ì¼€ì¤„ë§

---

## ğŸ’¬ ë„ì›€ì´ í•„ìš”í•˜ë©´

1. Firebase Console Functions ë¡œê·¸ í™•ì¸
   - https://console.firebase.google.com
   - Functions â†’ ë¡œê·¸

2. ë¸Œë¼ìš°ì € ì½˜ì†” (F12) í™•ì¸

3. Firebase Emulator UI í™•ì¸
   - http://localhost:4000
